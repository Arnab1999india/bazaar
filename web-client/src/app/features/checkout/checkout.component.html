<section class="checkout">
  <h2>Checkout</h2>
  <p class="error" *ngIf="errorMessage">{{ errorMessage }}</p>

  <div *ngIf="isLoading">Loading checkout...</div>

  <div class="checkout-layout" *ngIf="!isLoading">
    <form [formGroup]="addressForm" class="address-form">
      <h3>Delivery Address</h3>
      <div class="form-group">
        <label for="fullName">Full Name</label>
        <input id="fullName" formControlName="fullName" class="form-control" />
      </div>
      <div class="form-group">
        <label for="phone">Phone</label>
        <input id="phone" formControlName="phone" class="form-control" />
      </div>
      <div class="form-group">
        <label for="line1">Address Line 1</label>
        <input id="line1" formControlName="line1" class="form-control" />
      </div>
      <div class="form-group">
        <label for="line2">Address Line 2</label>
        <input id="line2" formControlName="line2" class="form-control" />
      </div>
      <div class="form-row">
        <div class="form-group">
          <label for="city">City</label>
          <input id="city" formControlName="city" class="form-control" />
        </div>
        <div class="form-group">
          <label for="state">State</label>
          <input id="state" formControlName="state" class="form-control" />
        </div>
        <div class="form-group">
          <label for="postalCode">Postal Code</label>
          <input
            id="postalCode"
            formControlName="postalCode"
            class="form-control"
          />
        </div>
      </div>
    </form>

    <div class="order-summary">
      <h3>Order Summary</h3>
      <div class="summary-item" *ngFor="let item of items">
        <div>
          <p class="title">{{ item.product.name }}</p>
          <p class="meta">Qty: {{ item.quantity }}</p>
        </div>
        <p class="price">₹{{ item.product.price * item.quantity }}</p>
      </div>
      <div class="summary-row">
        <span>Subtotal</span>
        <span>₹{{ totals.subtotal }}</span>
      </div>
      <div class="summary-row">
        <span>Delivery</span>
        <span>₹{{ totals.deliveryCharge }}</span>
      </div>
      <div class="summary-row total">
        <span>Total</span>
        <span>₹{{ totals.total }}</span>
      </div>
      <button
        class="btn btn-primary"
        type="button"
        (click)="continueToPayment()"
        [disabled]="!items.length"
      >
        Continue to Payment
      </button>
    </div>
  </div>
</section>
